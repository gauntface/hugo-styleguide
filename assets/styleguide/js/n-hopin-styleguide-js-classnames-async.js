class e{getCSSReports(){const e=[];for(const t of document.styleSheets)try{const s=t,n={StylesheetHref:s.href,BEMClassSelectors:[],NonBEMClassSelectors:[],IDSelectors:[],UnknownSelectors:[]};this.getCSSRulesForStylesheet(n,s),e.push(n)}catch(e){console.warn("Failed to process styleguide:",e)}return e}getCSSRulesForStylesheet(e,t){for(const s of t.cssRules)s instanceof CSSStyleRule?this.parseCSSStyleRule(e,s):s instanceof CSSMediaRule?this.parseCSSMediaRule(e,s):console.warn("Skipping CSS rule due to its unknown type:",s)}parseCSSMediaRule(e,t){for(const s of t.cssRules)s instanceof CSSStyleRule?this.parseCSSStyleRule(e,s):console.warn("Skipping CSS Media rule due to its unknown type:",s)}parseCSSStyleRule(e,t){const s=this.splitSelectors(t.selectorText);for(const t of s)this.parseSelector(e,t)}parseSelector(e,t){switch(t.substring(0,1)){case".":const s=this.parseBEMSelector(t);s?e.BEMClassSelectors.push(s):e.NonBEMClassSelectors.push(t);break;case"#":e.IDSelectors.push(t);break;default:e.UnknownSelectors.push(t)}}parseBEMSelector(e){const t=/^\.(?:n-([a-z0-9-]*)-)?([cul])-((?:[a-z0-9]|-(?=[a-z0-9]))+)(?:__((?:[a-z0-9]|-(?=[a-z0-9]))+))?(?:--((?:[a-z0-9]|-(?=[a-z0-9]))+))?(?::(?:.*))*?$/.exec(e);if(!t)return null;const s={namespace:null,type:t[2],body:t[3],element:t[4],modifier:t[5]};return t[1]&&(s.namespace=t[1]),s}render(){const e=this.getCSSReports(),t=document.querySelector(".n-hopin-styleguide-js-bem-classnames");if(t){const s=this.orderedBEMSelectors(e);this.renderBEMList(s,t)}const s=document.querySelector(".n-hopin-styleguide-js-invalid-classnames");if(s){const t=this.orderedItems(e,(e=>e.NonBEMClassSelectors));this.renderList(t,s)}const n=document.querySelector(".n-hopin-styleguide-js-ids");if(n){const t=this.orderedItems(e,(e=>e.IDSelectors));this.renderList(t,n)}const o=document.querySelector(".n-hopin-styleguide-js-elements");if(o){const t=this.orderedItems(e,(e=>e.UnknownSelectors));this.renderList(t,o)}}renderList(e,t){const s=document.createElement("ol");for(const t of e){if(1===t.indexOf("n-hopin-styleguide"))continue;const e=document.createElement("li");e.textContent=t,s.appendChild(e)}t.appendChild(s)}renderBEMList(e,t){const s=this.groupNames(e,(e=>({name:e.namespace,id:"namespace"})));for(const e of s){const s=document.createElement("div");s.classList.add("n-hopin-styleguide-c-selector-row"),s.appendChild(this.renderRowGroup(e.selectors,(e=>({name:".",id:""})))),e.name&&(s.appendChild(this.renderRowGroup(e.selectors,(e=>({name:`n-${e.namespace}`,id:"namespace"})))),s.appendChild(this.renderRowGroup(e.selectors,(e=>({name:"-",id:""}))))),s.appendChild(this.renderRowGroup(e.selectors,(e=>({name:e.type,id:"type"})))),s.appendChild(this.renderRowGroup(e.selectors,(e=>({name:"-",id:""})))),s.appendChild(this.renderRowGroup(e.selectors,(e=>({name:e.body,id:"body"})))),s.appendChild(this.renderRowGroup(e.selectors,(e=>e.element?{name:`__${e.element}`,id:"element"}:e.modifier?{name:`--${e.modifier}`,id:"modifier"}:{name:"",id:""}))),s.appendChild(this.renderRowGroup(e.selectors,(e=>e.element&&e.modifier?{name:`--${e.modifier}`,id:"modifier"}:{name:"",id:""}))),t.appendChild(s)}}renderRowGroup(e,t){const s=document.createElement("div");s.classList.add("n-hopin-styleguide-c-selector-row__container");const n=this.groupNames(e,t);for(const e of n){const t=document.createElement("div");t.classList.add("n-hopin-styleguide-c-selector-row__group");for(let s=0;s<e.count;s++){const s=document.createElement("span");s.classList.add("n-hopin-styleguide-c-selector-row__item"),e.name?(e.id&&(s.classList.add(`n-hopin-styleguide-c-selector-row__item--${e.id}`),s.classList.add("n-hopin-styleguide-c-selector-row__item--highlight")),s.textContent=e.name):s.innerHTML="&nbsp;",t.appendChild(s)}s.appendChild(t)}return s}renderBEMGroup(e){const t=document.createElement("div");t.classList.add("n-hopin-styleguide-l-bemgroup--name");for(let s=0;s<e.count;s++){const s=document.createElement("div");s.classList.add("n-hopin-styleguide-l-bemgroup--line-item"),s.textContent=e.name,t.appendChild(s)}const s=document.createElement("div");s.classList.add("n-hopin-styleguide-l-bemgroup--subgroup");for(const t of e.subgroups)s.appendChild(this.renderBEMGroup(t));const n=document.createElement("div");return n.classList.add("n-hopin-styleguide-l-bemgroup"),n.appendChild(t),n.appendChild(s),n}groupNames(e,t){const s=[];let n;for(const o of e){const{name:e,id:r}=t(o);n&&e==n.name||(n={name:e,id:r,count:0,selectors:[]},s.push(n)),n.count++,n.selectors.push(o)}return s}orderedItems(e,t){const s=[];for(const n of e){const e=t(n);for(const t of e)-1==s.indexOf(t)&&s.push(t)}return s.sort()}orderedBEMSelectors(e){const t=[];for(const s of e)for(const e of s.BEMClassSelectors)"hopin-styleguide"!==e.namespace&&t.push(e);function s(e,t){if(e!==t){if(!e)return-1;if(!t)return 1}return(e=(e||"").toLowerCase())>(t=(t||"").toLowerCase())?1:t>e?-1:0}return t.sort((function(e,t){return s(e.modifier,t.modifier)})),t.sort((function(e,t){return s(e.element,t.element)})),t.sort((function(e,t){return s(e.body,t.body)})),t.sort((function(e,t){return s(e.type,t.type)})),t.sort((function(e,t){return s(e.namespace,t.namespace)})),t}splitSelectors(e){return e.split(/(?:\s|,)+/)}}window.addEventListener("load",(function(){(new e).render()}));
